<data:sql-datasource xmlns:data="http://jfreereport.sourceforge.net/namespaces/datasources/sql">
  <data:config/>
  <data:connection>
    <data:driver>org.postgresql.Driver</data:driver>
    <data:url>jdbc:postgresql://192.241.187.169:5432/VK_Digital</data:url>
    <data:properties>
      <data:property name="user">postgres</data:property>
      <data:property name="password">encrypted:771b4a60055957</data:property>
      <data:property name="::pentaho-reporting::port">5432</data:property>
      <data:property name="::pentaho-reporting::name">SLT</data:property>
      <data:property name="::pentaho-reporting::database-name">VK_Digital</data:property>
      <data:property name="::pentaho-reporting::hostname">192.241.187.169</data:property>
      <data:property name="::pentaho-reporting::database-type">POSTGRESQL</data:property>
    </data:properties>
  </data:connection>
  <data:query-definitions>
    <data:query name="Query 1">
      <data:static-query>SELECT distinct 
storecode, storename,storetype , count(serialno2) OVER (PARTITION BY storecode) as total, count(serialno2) OVER () as Gtotal
FROM sms_ecomaster as eco

INNER JOIN  inv_storeinformation as store ON eco.gustoreid = store.gustoreid

 where 
  storename != 'VKD_MAINSTORE' and
 storetype IN (SELECT CASE WHEN (${StoreType}::text ='' OR ${StoreType}::text ='All' OR ${StoreType}::text IS NULL) THEN storetype ELSE ${StoreType}::text END)

   
</data:static-query>
    </data:query>
    <data:query name="StroeType">
      <data:static-query>SELECT 1 AS sort,'All' AS storename
UNION
SELECT DISTINCT 2 AS sort,
 inv_storeinformation.storetype AS storename
   
FROM
 inv_storeinformation
     
ORDER BY sort</data:static-query>
    </data:query>
  </data:query-definitions>
</data:sql-datasource>
